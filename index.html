<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Flappy Skull üíÄ</title>
  <link rel="manifest" href="manifest.json">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: linear-gradient(180deg, #6ee7b7 0%, #3b82f6 100%);
      display: flex; justify-content: center; align-items: center;
      height: 100vh; overflow: hidden;
      font-family: "Poppins", sans-serif;
    }
    canvas {
      border-radius: 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      touch-action: manipulation;
      background: linear-gradient(180deg, #60a5fa 0%, #93c5fd 60%, #fef9c3 100%);
    }
    button {
      position: absolute;
      top: 15px;
      right: 15px;
      background: #000;
      color: #fff;
      border: none;
      border-radius: 50%;
      font-size: 22px;
      width: 45px;
      height: 45px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      z-index: 10;
    }
    button:hover {
      background: #333;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="400" height="600"></canvas>
  <button id="pauseBtn">‚è∏Ô∏è</button>

  <!-- üéµ Sounds -->
  <audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_26b36a8c8b.mp3" type="audio/mpeg">
  </audio>
  <audio id="flapSound">
    <source src="https://cdn.pixabay.com/download/audio/2023/05/02/audio_8c19ec7d3a.mp3?filename=wing-flap-142329.mp3" type="audio/mpeg">
  </audio>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const bgMusic = document.getElementById("bgMusic");
    const flapSound = document.getElementById("flapSound");
    const pauseBtn = document.getElementById("pauseBtn");

    let gameState = "menu";
    let paused = false;

    const bird = { x: 80, y: 260, w: 30, h: 30, vel: 0, grav: 0.12, lift: -4 };
    let pipes = [], frame = 0, score = 0, high = localStorage.getItem("flappyHigh") || 0;

    function drawGradientSky() {
      const grad = ctx.createLinearGradient(0, 0, 0, canvas.height);
      grad.addColorStop(0, "#60a5fa");
      grad.addColorStop(1, "#fef9c3");
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    function drawGround() {
      ctx.fillStyle = "#d9f99d";
      ctx.fillRect(0, canvas.height - 100, canvas.width, 100);
    }

    function drawBird() {
      ctx.font = "28px Arial";
      ctx.fillText("üíÄ", bird.x, bird.y + 25);
    }

    function drawPipes() {
      ctx.fillStyle = "#22c55e";
      pipes.forEach(p => {
        ctx.fillRect(p.x, p.y, p.w, p.h);
        ctx.fillRect(p.x, p.y + p.h + p.gap, p.w, canvas.height - p.y - p.h - p.gap - 100);
      });
    }

    function drawText(txt, x, y, size = 28, color = "#fff", bold = true) {
      ctx.fillStyle = color;
      ctx.font = (bold ? "bold " : "") + size + "px Poppins";
      ctx.fillText(txt, x, y);
    }

    function updateBird() {
      bird.vel += bird.grav;
      bird.y += bird.vel;
      if (bird.y + bird.h >= canvas.height - 100) endGame();
      if (bird.y < 0) bird.y = 0;
    }

    function updatePipes() {
      if (frame % 130 === 0) {
        const topH = Math.random() * 150 + 50;
        pipes.push({ x: canvas.width, y: 0, h: topH, gap: 170, w: 80, sc: false });
      }
      pipes.forEach(p => {
        p.x -= 1.0;
        if (!p.sc && p.x + p.w < bird.x) { score++; p.sc = true; }
        if (bird.x + bird.w - 5 > p.x && bird.x + 5 < p.x + p.w &&
            (bird.y + 5 < p.h || bird.y + bird.h - 5 > p.h + p.gap)) endGame();
      });
      pipes = pipes.filter(p => p.x + p.w > 0);
    }

    function endGame() {
      gameState = "over";
      bgMusic.pause();
      if (score > high) { high = score; localStorage.setItem("flappyHigh", high); }
    }

    function startGame() {
      gameState = "play";
      pipes = []; score = 0; frame = 0;
      bird.y = 260; bird.vel = 0;
      bgMusic.currentTime = 0; bgMusic.play();
    }

    function drawMenu() {
      drawGradientSky(); drawGround();
      drawText("Flappy Skull üíÄ", 90, 190, 36, "#fff");
      drawText("Made by Tanush Satgur", 70, 230, 18, "#000", true);
      const yOffset = Math.sin(Date.now() / 300) * 6;
      ctx.save(); ctx.translate(200, 320 + yOffset);
      ctx.font = "32px Arial"; ctx.fillText("üíÄ", 0, 0);
      ctx.restore();
      drawText("Tap or Press Space to Start", 50, 430, 18, "#fff", false);
    }

    function drawOver() {
      drawGradientSky(); drawGround(); drawPipes(); drawBird();
      drawText("Game Over", 110, 250, 36, "#fff");
      drawText("Score: " + score, 140, 300, 26);
      drawText("Best: " + high, 150, 330, 26);
      drawText("Made by Tanush Satgur", 90, 370, 18, "#000", true);
      drawText("Tap or Press Space to Restart", 30, 410, 18, "#fff", false);
    }

    function drawPlay() {
      drawGradientSky(); drawPipes(); drawGround(); drawBird();
      drawText("Score: " + score, 10, 40, 24);
      drawText("Made by Tanush Satgur", 10, 590, 16, "#000", true);
    }

    function loop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (gameState === "menu") drawMenu();
      else if (gameState === "play") {
        if (!paused) {
          updatePipes(); updateBird(); frame++;
        }
        drawPlay();
      }
      else if (gameState === "over") drawOver();
      requestAnimationFrame(loop);
    }

    function flap() {
      if (gameState === "menu") startGame();
      else if (gameState === "play" && !paused) {
        bird.vel = bird.lift;
        flapSound.currentTime = 0;
        flapSound.play();
      }
      else if (gameState === "over") startGame();
    }

    window.addEventListener("keydown", e => {
      if (e.code === "Space") flap();
    });
    canvas.addEventListener("touchstart", flap);

    pauseBtn.addEventListener("click", () => {
      if (gameState === "play") {
        paused = !paused;
        pauseBtn.textContent = paused ? "‚ñ∂Ô∏è" : "‚è∏Ô∏è";
        if (paused) bgMusic.pause();
        else bgMusic.play();
      }
    });

    bgMusic.volume = 0.3;
    loop();

    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>
</body>
</html>






